<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8.Vue.set的使用</title>
</head>

<body>
    <!-- ### 1.10.8 Vue.set的使用
    - Vue.set( target, propertyName/index, value )  
        参数：
        {Object | Array} target  
        {string | number} propertyName/index  
        {any} value  
        返回值：设置的值。

        用法：  
        向响应式对象中添加一个 property，  
        并确保这个新 property 同样是响应式的，且触发视图更新。  
        它必须用于向响应式对象上添加新 property，  
        因为 Vue 无法探测普通的新增 property   
        (比如 this.myObject.newProperty = 'hi')  
        注意对象不能是 Vue 实例，或者 Vue 实例的根数据对象。

        - vm.$set( target, propertyName/index, value )
            这是全局 Vue.set 的别名。 -->
    <div id="root">
        <h2>数据</h2>
        <h3>{{person.name}}</h3>
        <h3>{{person.address}}</h3>
        <button @click="addAttr">添加一个属性</button>
        <h3 v-if="person.age">{{person.age}}</h3>
    </div>
    <script src="../../js/vue.js"></script>
    <script>
        Vue.config.productionTip = false;
        let vm = new Vue({
            el: '#root'
            , data() {
                return {
                    person: {
                        name: '柯布',
                        address: 'Inception',
                    }
                }
            },
            methods: {
                addAttr() {
                    // 向响应式对象中添加一个 property
                    // Vue.set( target, propertyName/index, value )  
                    vm.$set(this.person, 'age', 40)
                }
            },
        })
    </script>
</body>

</html>